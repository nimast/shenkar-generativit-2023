{"mappings":"","sources":["sketches/daria/mySketch.js"],"sourcesContent":["let cam;\nlet osc;\nlet playing = false;\nlet trippyAmount = 0;\n\nfunction setup() {\n  createCanvas(640, 480);\n  cam = createCapture(VIDEO);\n  cam.size(width, height);\n  cam.hide();\n\n  osc = new p5.Oscillator();\n  osc.setType('sine');\n  osc.freq(432);\n  osc.amp(0);\n  osc.start();\n}\n\nfunction draw() {\n  background(0);\n\n  if (playing) {\n    trippyAmount = map(frameCount, 0, 60 * 60, 0, 1);\n\n    applyTrippyEffect();\n  } else {\n    image(cam, 0, 0, width, height);\n  }\n}\n\nfunction applyTrippyEffect() {\n  loadPixels();\n\n  for (let x = 0; x < width; x++) {\n    for (let y = 0; y < height; y++) {\n      let index = (x + y * width) * 4;\n      let r = pixels[index];\n      let g = pixels[index + 1];\n      let b = pixels[index + 2];\n\n      let offsetX = noise(x * 0.01, y * 0.01, frameCount * 0.02) * 30 - 15;\n      let offsetY = noise(x * 0.01, y * 0.01, frameCount * 0.02 + 100) * 30 - 15;\n\n      let neighborX = floor(x + offsetX);\n      let neighborY = floor(y + offsetY);\n\n      if (neighborX >= 0 && neighborX < width && neighborY >= 0 && neighborY < height) {\n        let neighborIndex = (neighborX + neighborY * width) * 4;\n        r = pixels[neighborIndex];\n        g = pixels[neighborIndex + 1];\n        b = pixels[neighborIndex + 2];\n      }\n\n      r += random(-50, 50) * trippyAmount;\n      g += random(-50, 50) * trippyAmount;\n      b += random(-50, 50) * trippyAmount;\n\n      pixels[index] = constrain(r, 0, 255);\n      pixels[index + 1] = constrain(g, 0, 255);\n      pixels[index + 2] = constrain(b, 0, 255);\n    }\n  }\n\n  updatePixels();\n}\n\nfunction mousePressed() {\n  if (mouseX >= 0 && mouseX <= width && mouseY >= 0 && mouseY <= height) {\n    if (!playing) {\n      osc.amp(0.5, 0.1);\n      playing = true;\n    } else {\n      osc.amp(0, 0.1);\n      playing = false;\n    }\n  }\n}\n"],"names":[],"version":3,"file":"daria.8e8a20e9.js.map"}